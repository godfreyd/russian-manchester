# Работа с базой данных

* [Переименование таблиц](#Переименование-таблиц)
* [Чтение таблицы](#Чтение-таблицы)
* [Запись в таблицу](#Запись-в-таблицу)
* [Дополнительные столбцы, предоставляемые Active Record](#Дополнительные-столбцы-предоставляемые-active-record)

## Переименование таблиц

Если вам приходится использовать унаследованные таблицы или вам не нравится подобное поведение Rails, именем таблицы, связанной с конкретной моделью, можно управлять путем задания значения свойства `table_name` для конкретного класса:

```ruby
class Sheep < ActiveRecord::Base
    self.table_name = "sheep"
end
```

## Чтение таблицы

Чтобы вывести все столбцы таблицы `roles`, выполните команду:

```ruby
> rails console
> Spree::Role.column_names
```

Чтобы запросить подробную информацию о столбце, например `name`, выполните команду:

```ruby
> rails console
> Spree::Role.columns_hash["name"]
```

## Запись в таблицу

Чтобы записать новое значение в таблицу, правильно будет создать миграцию и перезапустить приложение.

Поиграться можно так:

```ruby
> rails console
> o = Spree::Role.find(1)
> puts o.name               #=> "admin"
> o.name = "super admin"    #=> "super admin"
```

## Дополнительные столбцы, предоставляемые Active Record

Существует ряд имен столбцов, имеющих особое значение для Active Record:

* `created_at`, `created_on`, `updated_at`, `updated_on`
    Автоматически обновляются показателем времени создания строки или ее последнего обновления. Для этого нужно обеспечить способность исходного столбца базы данных принимать данные в формате даты, даты и времени или строки. По соглашению, в Rails-приложениях используется суффикс `_on` для столбцов с датой и суффикс `_at` для столбцов, включающих время.
* `id`
    Имя, используемое по умолчанию для столбца первичного ключа таблицы (см  раздел «Идентификация отдельных строк»).
* `xxx_id`
    Имя, используемое по умолчанию для ссылки внешнего ключа на таблицу с множественной формой `xxx`. 
* `xxx_count`
    Используется для поддержки кэша счетчика для дочерней таблицы `xxx`. 

Дополнительные модули, такие как `act_as_list1`, могут определять дополнительные столбцы. Как первичные, так и внешние ключи играют жизненно важную роль в операциях с базой данных и заслуживают дополнительного рассмотрения.
